language: python

sudo: required

env:
  global:
    - DO_PLOT=0

matrix:
  include:
    - env: PYTHON_VERSION=2.7
      os: linux
      python: "2.7"
    - env: PYTHON_VERSION=3.7
      os: linux
      python: "3.7"
    - env: PYTHON_VERSION=3
      os: osx
      language: generic

addons:
  apt:
    packages:
      - cmake
      - libboost-dev
      - libgeos++-dev
      - g++
      - python-matplotlib
      - python-tk

install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then cd extra && chmod u+x install_linux.sh && ./install_linux.sh; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then cd extra && chmod u+x install_macos.sh && ./install_macos.sh; fi
  - pip install --user pytest nngt networkx pyneuroml

script: pytest tests --ignore=tests/todo